<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全守护 - 登录</title>
    <script src="https://unpkg.byted-static.com/coze/space_ppt_lib/1.0.3-alpha.12/lib/tailwindcss.js"></script>
    <script src="https://unpkg.byted-static.com/fortawesome/fontawesome-free/6.7.2/js/all.min.js" data-auto-replace-svg="nest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FAE9DB',
                        secondary: '#F48224', 
                        accent: '#624731',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444'
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    boxShadow: {
                        'card': '0 4px 12px rgba(0, 0, 0, 0.08)',
                        'button': '0 2px 8px rgba(244, 130, 36, 0.3)'
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #FAE9DB 0%, #F8E0D0 100%);
        }
        
        .login-button {
            background: linear-gradient(135deg, #F48224 0%, #E8741A 100%);
            box-shadow: 0 4px 16px rgba(244, 130, 36, 0.4);
            transition: all 0.3s ease;
        }
        
        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 130, 36, 0.5);
        }
        
        .wechat-button {
            background: linear-gradient(135deg, #07C160 0%, #00A651 100%);
            box-shadow: 0 4px 16px rgba(7, 193, 96, 0.4);
            transition: all 0.3s ease;
        }
        
        .wechat-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(7, 193, 96, 0.5);
        }
        
        .phone-login-form {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .status-bar {
            background: linear-gradient(135deg, #1F2937 0%, #374151 100%);
        }
        
        .logo-glow {
            box-shadow: 0 0 30px rgba(244, 130, 36, 0.3);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(100%); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- iOS状态栏 -->
    <div id="status-bar" class="status-bar text-white text-sm flex justify-between items-center px-4 py-1">
        <div class="flex items-center space-x-1">
            <span>9:41</span>
        </div>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <i class="fas fa-battery-three-quarters text-xs"></i>
        </div>
    </div>

    <!-- 主容器 -->
    <div id="main-container" class="min-h-screen gradient-bg">
        <!-- 主要内容区域 -->
        <div id="content-area" class="px-6 pt-20 pb-8">
            <!-- Logo和标题区域 -->
            <div id="logo-section" class="text-center mb-16 fade-in">
                <div id="logo-container" class="w-24 h-24 mx-auto mb-6 bg-white rounded-3xl flex items-center justify-center logo-glow">
                    <i class="fas fa-shield-alt text-4xl text-secondary"></i>
                </div>
                <h1 id="app-title" class="text-3xl font-bold text-accent mb-2">安全守护</h1>
                <p id="app-subtitle" class="text-gray-600">让关爱无处不在</p>
            </div>

            <!-- 登录方式选择 -->
            <div id="login-methods" class="space-y-4 fade-in">
                <!-- 微信快捷登录按钮 -->
                <button id="wechat-login-btn" class="wechat-button w-full py-4 rounded-2xl text-white font-semibold text-lg flex items-center justify-center space-x-3">
                    <i class="fab fa-weixin text-2xl"></i>
                    <span>微信快捷登录</span>
                </button>

                <!-- 分割线 -->
                <div id="divider" class="flex items-center my-8">
                    <div class="flex-1 h-px bg-gray-300"></div>
                    <span class="px-4 text-gray-500 text-sm">或</span>
                    <div class="flex-1 h-px bg-gray-300"></div>
                </div>

                <!-- 手机号登录入口 -->
                <button id="phone-login-link" class="w-full py-4 border-2 border-secondary rounded-2xl text-secondary font-semibold text-lg flex items-center justify-center space-x-3 hover:bg-secondary hover:text-white transition-all duration-300">
                    <i class="fas fa-mobile-alt text-xl"></i>
                    <span>手机号登录</span>
                </button>
            </div>

            <!-- 用户协议 -->
            <div id="agreement-section" class="mt-12 text-center fade-in">
                <p class="text-xs text-gray-500 leading-relaxed">
                    登录即表示同意
                    <a id="user-agreement-link" href="#" class="text-secondary underline">《用户协议》</a>
                    和
                    <a id="privacy-policy-link" href="#" class="text-secondary underline">《隐私政策》</a>
                </p>
            </div>
        </div>

        <!-- 手机号登录表单（隐藏状态） -->
        <div id="phone-login-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
            <div id="phone-login-content" class="absolute bottom-0 left-0 right-0 phone-login-form rounded-t-3xl p-6 slide-up">
                <div id="modal-header" class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-accent">手机号登录</h2>
                    <button id="close-modal-btn" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="phone-login-form" class="space-y-4">
                    <div id="phone-input-group">
                        <label for="phone-number" class="block text-sm font-medium text-gray-700 mb-2">手机号</label>
                        <div class="relative">
                            <input type="tel" 
                                   id="phone-number" 
                                   name="phone-number" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent" 
                                   placeholder="请输入手机号"
                                   maxlength="11">
                        </div>
                    </div>

                    <div id="verification-input-group">
                        <label for="verification-code" class="block text-sm font-medium text-gray-700 mb-2">验证码</label>
                        <div class="flex space-x-3">
                            <input type="text" 
                                   id="verification-code" 
                                   name="verification-code" 
                                   class="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent" 
                                   placeholder="请输入验证码"
                                   maxlength="6">
                            <button type="button" 
                                    id="send-code-btn" 
                                    class="px-4 py-3 bg-secondary text-white rounded-xl font-medium hover:bg-opacity-90 transition-all duration-300 whitespace-nowrap">
                                发送验证码
                            </button>
                        </div>
                    </div>

                    <button type="submit" 
                            id="phone-login-submit" 
                            class="login-button w-full py-4 rounded-2xl text-white font-semibold text-lg mt-6">
                        登录
                    </button>
                </form>
            </div>
        </div>

        <!-- 协议详情弹窗 -->
        <div id="agreement-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
            <div id="agreement-content" class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 slide-up max-h-96 overflow-hidden">
                <div id="agreement-header" class="flex items-center justify-between mb-4">
                    <h3 id="agreement-title" class="text-lg font-bold text-accent">用户协议</h3>
                    <button id="close-agreement-btn" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="agreement-text" class="overflow-y-auto max-h-72 text-sm text-gray-700 leading-relaxed">
                    <!-- 协议内容将在这里动态加载 -->
                </div>
            </div>
        </div>

        <!-- 加载提示 -->
        <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-2xl p-6 flex flex-col items-center space-y-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-secondary"></div>
                <p class="text-gray-600">登录中...</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 微信快捷登录
            document.querySelector('#wechat-login-btn').addEventListener('click', function() {
                console.log('需要调用第三方接口实现微信快捷登录');
                showLoading();
                
                // 模拟登录成功
                setTimeout(function() {
                    hideLoading();
                    window.location.href = 'P-ROLE_SELECT.html';
                }, 2000);
            });

            // 手机号登录入口
            document.querySelector('#phone-login-link').addEventListener('click', function() {
                document.querySelector('#phone-login-modal').classList.remove('hidden');
            });

            // 关闭手机号登录弹窗
            document.querySelector('#close-modal-btn').addEventListener('click', function() {
                document.querySelector('#phone-login-modal').classList.add('hidden');
                clearPhoneForm();
            });

            // 点击弹窗背景关闭
            document.querySelector('#phone-login-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                    clearPhoneForm();
                }
            });

            // 发送验证码
            document.querySelector('#send-code-btn').addEventListener('click', function() {
                const phoneNumber = document.querySelector('#phone-number').value;
                
                if (!validatePhone(phoneNumber)) {
                    showToast('请输入正确的手机号');
                    return;
                }

                // 开始倒计时
                startCountdown();
                
                // 模拟发送验证码
                console.log('发送验证码到手机号：' + phoneNumber);
                showToast('验证码已发送');
            });

            // 手机号登录表单提交
            document.querySelector('#phone-login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const phoneNumber = document.querySelector('#phone-number').value;
                const verificationCode = document.querySelector('#verification-code').value;
                
                if (!validatePhone(phoneNumber)) {
                    showToast('请输入正确的手机号');
                    return;
                }
                
                if (!verificationCode || verificationCode.length !== 6) {
                    showToast('请输入6位验证码');
                    return;
                }

                showLoading();
                
                // 模拟登录验证
                setTimeout(function() {
                    hideLoading();
                    document.querySelector('#phone-login-modal').classList.add('hidden');
                    clearPhoneForm();
                    window.location.href = 'P-ROLE_SELECT.html';
                }, 1500);
            });

            // 用户协议链接
            document.querySelector('#user-agreement-link').addEventListener('click', function(e) {
                e.preventDefault();
                showAgreementModal('用户协议', getUserAgreementContent());
            });

            // 隐私政策链接
            document.querySelector('#privacy-policy-link').addEventListener('click', function(e) {
                e.preventDefault();
                showAgreementModal('隐私政策', getPrivacyPolicyContent());
            });

            // 关闭协议弹窗
            document.querySelector('#close-agreement-btn').addEventListener('click', function() {
                document.querySelector('#agreement-modal').classList.add('hidden');
            });

            // 点击协议弹窗背景关闭
            document.querySelector('#agreement-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            // 工具函数
            function validatePhone(phone) {
                const phoneRegex = /^1[3-9]\d{9}$/;
                return phoneRegex.test(phone);
            }

            function startCountdown() {
                const btn = document.querySelector('#send-code-btn');
                let countdown = 60;
                btn.disabled = true;
                btn.classList.add('opacity-50');
                
                const timer = setInterval(function() {
                    btn.textContent = `${countdown}秒后重发`;
                    countdown--;
                    
                    if (countdown < 0) {
                        clearInterval(timer);
                        btn.disabled = false;
                        btn.classList.remove('opacity-50');
                        btn.textContent = '发送验证码';
                    }
                }, 1000);
            }

            function clearPhoneForm() {
                document.querySelector('#phone-number').value = '';
                document.querySelector('#verification-code').value = '';
            }

            function showLoading() {
                document.querySelector('#loading-overlay').classList.remove('hidden');
            }

            function hideLoading() {
                document.querySelector('#loading-overlay').classList.add('hidden');
            }

            function showToast(message) {
                // 创建临时提示
                const toast = document.createElement('div');
                toast.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg z-50';
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(function() {
                    document.body.removeChild(toast);
                }, 2000);
            }

            function showAgreementModal(title, content) {
                document.querySelector('#agreement-title').textContent = title;
                document.querySelector('#agreement-text').innerHTML = content;
                document.querySelector('#agreement-modal').classList.remove('hidden');
            }

            function getUserAgreementContent() {
                return `
                    <div class="space-y-4">
                        <h4 class="font-semibold text-accent">1. 服务条款</h4>
                        <p>欢迎使用安全守护App。在使用本应用前，请仔细阅读并理解本用户协议。</p>
                        
                        <h4 class="font-semibold text-accent">2. 用户责任</h4>
                        <p>用户应确保提供真实、准确的个人信息，并对其账户安全负责。</p>
                        
                        <h4 class="font-semibold text-accent">3. 服务内容</h4>
                        <p>本应用提供独居者安全监护服务，包括每日打卡、监督人关注等功能。</p>
                        
                        <h4 class="font-semibold text-accent">4. 隐私保护</h4>
                        <p>我们将严格保护用户隐私，详细条款请查看隐私政策。</p>
                        
                        <h4 class="font-semibold text-accent">5. 免责声明</h4>
                        <p>本应用仅提供信息提醒服务，不承担因使用本应用而产生的直接或间接损失责任。</p>
                    </div>
                `;
            }

            function getPrivacyPolicyContent() {
                return `
                    <div class="space-y-4">
                        <h4 class="font-semibold text-accent">1. 信息收集</h4>
                        <p>我们收集用户提供的基本信息，包括但不限于手机号、微信信息等。</p>
                        
                        <h4 class="font-semibold text-accent">2. 信息使用</h4>
                        <p>收集的信息仅用于提供服务，包括用户身份验证、服务推送等。</p>
                        
                        <h4 class="font-semibold text-accent">3. 信息保护</h4>
                        <p>我们采用行业标准的安全措施保护用户信息，防止信息泄露。</p>
                        
                        <h4 class="font-semibold text-accent">4. 信息共享</h4>
                        <p>未经用户同意，我们不会与第三方分享用户个人信息，法律要求除外。</p>
                        
                        <h4 class="font-semibold text-accent">5. 用户权利</h4>
                        <p>用户有权查看、修改、删除个人信息，可通过应用内设置操作。</p>
                    </div>
                `;
            }

            // 模拟实时时间更新
            function updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                document.querySelector('#status-bar span').textContent = timeString;
            }

            updateTime();
            setInterval(updateTime, 60000);
        });
    </script>
</body>
</html>