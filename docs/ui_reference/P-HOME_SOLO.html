<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全守护 - 独居者首页</title>
    <script src="https://unpkg.byted-static.com/coze/space_ppt_lib/1.0.3-alpha.12/lib/tailwindcss.js"></script>
    <script src="https://unpkg.byted-static.com/fortawesome/fontawesome-free/6.7.2/js/all.min.js" data-auto-replace-svg="nest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FAE9DB',
                        secondary: '#F48224', 
                        accent: '#624731',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444'
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    boxShadow: {
                        'card': '0 4px 12px rgba(0, 0, 0, 0.08)',
                        'button': '0 2px 8px rgba(244, 130, 36, 0.3)'
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #FAE9DB 0%, #F8E0D0 100%);
        }
        
        .checkin-button {
            background: linear-gradient(135deg, #F48224 0%, #E8741A 100%);
            box-shadow: 0 4px 16px rgba(244, 130, 36, 0.4);
            transition: all 0.3s ease;
        }
        
        .checkin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 130, 36, 0.5);
        }
        
        .completed-item {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            border-left: 4px solid #10B981;
        }
        
        .status-bar {
            background: linear-gradient(135deg, #1F2937 0%, #374151 100%);
        }
        
        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- iOS状态栏 -->
    <div id="status-bar" class="status-bar text-white text-sm flex justify-between items-center px-4 py-1">
        <div class="flex items-center space-x-1">
            <span>9:41</span>
        </div>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <i class="fas fa-battery-three-quarters text-xs"></i>
        </div>
    </div>

    <!-- 主容器 -->
    <div id="main-container" class="min-h-screen gradient-bg pb-20">
        <!-- 顶部用户信息区域 -->
        <header id="user-header" class="px-6 pt-8 pb-6">
            <div id="user-info" class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img id="user-avatar" 
                         src="https://s.coze.cn/image/4biftn465Qw/" 
                         alt="用户头像" 
                         data-category="人物"
                         class="w-16 h-16 rounded-full border-3 border-white shadow-lg">
                    <div>
                        <h1 id="user-greeting" class="text-lg font-semibold text-accent">早上好，张阿姨</h1>
                        <p id="user-subtitle" class="text-sm text-gray-600">今天也要保持健康哦～</p>
                    </div>
                </div>
                <div id="weather-info" class="text-right">
                    <div class="text-sm text-gray-600">北京</div>
                    <div class="text-lg font-semibold text-accent">22°C</div>
                </div>
            </div>
        </header>

        <!-- 今日待办悬浮按钮 -->
        <section id="checkin-section" class="px-6 mb-8">
            <button id="today-tasks-btn" class="checkin-button w-full py-6 rounded-3xl text-white font-bold text-xl flex items-center justify-center space-x-3">
                <i class="fas fa-tasks text-2xl"></i>
                <span>今日待办</span>
                <span id="pending-count" class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">3项</span>
            </button>
        </section>

        <!-- 今日进度概览 -->
        <section id="progress-overview" class="px-6 mb-6">
            <div id="progress-card" class="bg-white rounded-2xl shadow-card p-5">
                <h2 id="progress-title" class="text-lg font-semibold text-accent mb-4">今日进度</h2>
                <div id="progress-content" class="space-y-3">
                    <div id="progress-bar-container" class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">完成度</span>
                            <span id="progress-percentage" class="font-semibold text-secondary">4/7 (57%)</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="progress-bar" class="bg-gradient-to-r from-secondary to-orange-400 h-3 rounded-full" style="width: 57%"></div>
                        </div>
                    </div>
                    <div id="progress-stats" class="grid grid-cols-3 gap-4 pt-2">
                        <div id="stat-completed" class="text-center">
                            <div id="completed-count" class="text-2xl font-bold text-success">4</div>
                            <div class="text-xs text-gray-500">已完成</div>
                        </div>
                        <div id="stat-pending" class="text-center">
                            <div id="pending-count-stat" class="text-2xl font-bold text-warning">3</div>
                            <div class="text-xs text-gray-500">待完成</div>
                        </div>
                        <div id="stat-total" class="text-center">
                            <div id="total-count" class="text-2xl font-bold text-accent">7</div>
                            <div class="text-xs text-gray-500">总事项</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 已完成事项列表 -->
        <section id="completed-tasks" class="px-6 mb-6">
            <div id="completed-card" class="bg-white rounded-2xl shadow-card p-5">
                <h2 id="completed-title" class="text-lg font-semibold text-accent mb-4">已完成事项</h2>
                <div id="completed-list" class="space-y-3">
                    <div id="completed-item-1" class="completed-item rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-success bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-sun text-success"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">起床打卡</div>
                                <div class="text-sm text-gray-500">计划时间：07:00-08:00</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-success">已完成</div>
                            <div class="text-xs text-gray-500">07:30</div>
                        </div>
                    </div>
                    
                    <div id="completed-item-2" class="completed-item rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-success bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-utensils text-success"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">早餐打卡</div>
                                <div class="text-sm text-gray-500">计划时间：08:00-09:00</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-success">已完成</div>
                            <div class="text-xs text-gray-500">08:15</div>
                        </div>
                    </div>
                    
                    <div id="completed-item-3" class="completed-item rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-success bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-pills text-success"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">上午服药</div>
                                <div class="text-sm text-gray-500">计划时间：09:00-09:30</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-success">已完成</div>
                            <div class="text-xs text-gray-500">09:10</div>
                        </div>
                    </div>
                    
                    <div id="completed-item-4" class="completed-item rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-success bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-utensils text-success"></i>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">午餐打卡</div>
                                <div class="text-sm text-gray-500">计划时间：12:00-13:00</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-success">已完成</div>
                            <div class="text-xs text-gray-500">12:30</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 温馨提示 -->
        <section id="reminder-section" class="px-6 mb-8">
            <div id="reminder-card" class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-5 border border-blue-100">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                        <i class="fas fa-bell text-blue-600 text-sm"></i>
                    </div>
                    <div>
                        <h3 class="font-medium text-blue-800 mb-1">温馨提醒</h3>
                        <p class="text-sm text-blue-600">记得按时完成今日打卡，您的家人正在关注着您的健康状况～</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 底部导航栏 -->
    <nav id="bottom-nav" class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center h-16 px-2 safe-bottom z-40">
        <a id="nav-home" href="#" class="flex flex-col items-center p-2 text-secondary">
            <i class="fas fa-home text-xl"></i>
            <span class="text-xs mt-0.5 font-medium">首页</span>
        </a>
        <a id="nav-profile" href="#" class="flex flex-col items-center p-2 text-gray-500">
            <i class="far fa-user text-xl"></i>
            <span class="text-xs mt-0.5">个人中心</span>
        </a>
    </nav>

    <script>
        // 页面交互逻辑
        document.addEventListener('DOMContentLoaded', function() {
            // 今日待办按钮点击事件
            document.querySelector('#today-tasks-btn').addEventListener('click', function() {
                // 跳转到打卡事项列表页
                window.location.href = 'P-CHECKIN_LIST.html';
            });

            // 底部导航点击事件
            document.querySelector('#nav-home').addEventListener('click', function(e) {
                e.preventDefault();
                // 已在首页，无需操作
            });

            document.querySelector('#nav-profile').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-PROFILE.html';
            });

            // 模拟实时时间更新
            function updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                document.querySelector('#status-bar span').textContent = timeString;
            }

            // 每分钟更新一次时间
            updateTime();
            setInterval(updateTime, 60000);

            // 模拟问候语根据时间变化
            function updateGreeting() {
                const hour = new Date().getHours();
                const greetingElement = document.querySelector('#user-greeting');
                let greeting = '早上好，张阿姨';
                
                if (hour >= 12 && hour < 18) {
                    greeting = '下午好，张阿姨';
                } else if (hour >= 18) {
                    greeting = '晚上好，张阿姨';
                }
                
                greetingElement.textContent = greeting;
            }

            updateGreeting();

            // 模拟数据更新
            function updateProgressData() {
                // 这里可以添加从服务器获取最新数据的逻辑
                // 目前使用模拟数据
                const completed = 4;
                const pending = 3;
                const total = completed + pending;
                const percentage = Math.round((completed / total) * 100);

                // 更新进度显示
                document.querySelector('#pending-count').textContent = `${pending}项`;
                document.querySelector('#progress-percentage').textContent = `${completed}/${total} (${percentage}%)`;
                document.querySelector('#completed-count').textContent = completed;
                document.querySelector('#pending-count-stat').textContent = pending;
                document.querySelector('#total-count').textContent = total;
                document.querySelector('#progress-bar').style.width = `${percentage}%`;
            }

            // 初始化数据
            updateProgressData();

            // 模拟实时数据更新（每30秒）
            setInterval(updateProgressData, 30000);
        });
    </script>
</body>
</html>